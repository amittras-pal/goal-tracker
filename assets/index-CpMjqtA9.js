import{r as X,u as D,j as e,B as S,g as me,a as T,f as A,b as P,U as fe,c as U,d as W,e as J,p as Z,h as N,i as ee,k as he,l as ge,m as ye,n as be,T as ve,o as Q,q as F}from"./index--_GJNTul.js";import{u as xe,g as oe,a as je,b as _e,T as Ce,G as O}from"./index.esm-DvhLUkjF.js";import{I as z,u as Re,c as ae,a as se,b as we,d as re}from"./InputBase-DYrbb2l-.js";var ke={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const te=X.forwardRef(({__staticSelector:o,__stylesApiProps:s,className:a,classNames:n,styles:d,unstyled:u,children:i,label:r,description:c,id:y,disabled:j,error:_,size:p,labelPosition:b="left",bodyElement:l="div",labelElement:t="label",variant:v,style:m,vars:w,mod:f,...k},I)=>{const C=D({name:o,props:s,className:a,style:m,classes:ke,classNames:n,styles:d,unstyled:u});return e.jsx(S,{...C("root"),ref:I,__vars:{"--label-fz":me(p),"--label-lh":T(p,"label-lh")},mod:[{"label-position":b},f],variant:v,size:p,...k,children:e.jsxs(S,{component:l,htmlFor:l==="label"?y:void 0,...C("body"),children:[i,e.jsxs("div",{...C("labelWrapper"),"data-disabled":j||void 0,children:[r&&e.jsx(S,{component:t,htmlFor:t==="label"?y:void 0,...C("label"),"data-disabled":j||void 0,children:r}),c&&e.jsx(z.Description,{size:p,__inheritStyles:!1,...C("description"),children:c}),_&&typeof _!="boolean"&&e.jsx(z.Error,{size:p,__inheritStyles:!1,...C("error"),children:_})]})]})})});te.displayName="@mantine/core/InlineInput";function Ie({children:o,role:s}){const a=Re();return a?e.jsx("div",{role:s,"aria-labelledby":a.labelId,"aria-describedby":a.describedBy,children:o}):e.jsx(e.Fragment,{children:o})}const[Se,ne]=ae(),[Ge,$e]=ae();var ie={card:"m_9dc8ae12"};const Te={withBorder:!0},Ae=U((o,{radius:s})=>({card:{"--card-radius":W(s)}})),M=A((o,s)=>{const a=P("RadioCard",Te,o),{classNames:n,className:d,style:u,styles:i,unstyled:r,vars:c,checked:y,mod:j,withBorder:_,value:p,onClick:b,name:l,onKeyDown:t,...v}=a,m=D({name:"RadioCard",classes:ie,props:a,className:d,style:u,classNames:n,styles:i,unstyled:r,vars:c,varsResolver:Ae,rootSelector:"card"}),{dir:w}=xe(),f=ne(),k=typeof y=="boolean"?y:(f==null?void 0:f.value)===p||!1,I=l||(f==null?void 0:f.name),C=h=>{if(t==null||t(h),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(h.nativeEvent.code)){h.preventDefault();const x=Array.from(document.querySelectorAll(`[role="radio"][name="${I||"__mantine"}"]`)),$=x.findIndex(E=>E===h.target),R=$+1>=x.length?0:$+1,g=$-1<0?x.length-1:$-1;h.nativeEvent.code==="ArrowDown"&&(x[R].focus(),x[R].click()),h.nativeEvent.code==="ArrowUp"&&(x[g].focus(),x[g].click()),h.nativeEvent.code==="ArrowLeft"&&(x[w==="ltr"?g:R].focus(),x[w==="ltr"?g:R].click()),h.nativeEvent.code==="ArrowRight"&&(x[w==="ltr"?R:g].focus(),x[w==="ltr"?R:g].click())}};return e.jsx(Ge,{value:{checked:k},children:e.jsx(fe,{ref:s,mod:[{"with-border":_,checked:k},j],...m("card"),...v,role:"radio","aria-checked":k,name:I,onClick:h=>{b==null||b(h),f==null||f.onChange(p||"")},onKeyDown:C})})});M.displayName="@mantine/core/RadioCard";M.classes=ie;const Pe={},Y=A((o,s)=>{const{value:a,defaultValue:n,onChange:d,size:u,wrapperProps:i,children:r,name:c,readOnly:y,...j}=P("RadioGroup",Pe,o),_=se(c),[p,b]=we({value:a,defaultValue:n,finalValue:"",onChange:d}),l=t=>!y&&b(typeof t=="string"?t:t.currentTarget.value);return e.jsx(Se,{value:{value:p,onChange:l,size:u,name:_},children:e.jsx(z.Wrapper,{size:u,ref:s,...i,...j,labelElement:"div",__staticSelector:"RadioGroup",children:e.jsx(Ie,{role:"radiogroup",children:r})})})});Y.classes=z.Wrapper.classes;Y.displayName="@mantine/core/RadioGroup";function le({size:o,style:s,...a}){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:J(o),height:J(o),...s},"aria-hidden":!0,...a,children:e.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var ce={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const Ne={icon:le},ze=U((o,{radius:s,color:a,size:n,iconColor:d,variant:u,autoContrast:i})=>{const r=Z({color:a||o.primaryColor,theme:o}),c=r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-outline)`:r.color;return{indicator:{"--radio-size":T(n,"radio-size"),"--radio-radius":s===void 0?void 0:W(s),"--radio-color":u==="outline"?c:N(a,o),"--radio-icon-size":T(n,"radio-icon-size"),"--radio-icon-color":d?N(d,o):oe(i,o)?ee({color:a,theme:o,autoContrast:i}):void 0}}}),q=A((o,s)=>{const a=P("RadioIndicator",Ne,o),{classNames:n,className:d,style:u,styles:i,unstyled:r,vars:c,icon:y,radius:j,color:_,iconColor:p,autoContrast:b,checked:l,mod:t,variant:v,disabled:m,...w}=a,f=y,k=D({name:"RadioIndicator",classes:ce,props:a,className:d,style:u,classNames:n,styles:i,unstyled:r,vars:c,varsResolver:ze,rootSelector:"indicator"}),I=$e(),C=typeof l=="boolean"?l:(I==null?void 0:I.checked)||!1;return e.jsx(S,{ref:s,...k("indicator",{variant:v}),variant:v,mod:[{checked:C,disabled:m},t],...w,children:e.jsx(f,{...k("icon")})})});q.displayName="@mantine/core/RadioIndicator";q.classes=ce;var de={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Be={labelPosition:"right"},De=U((o,{size:s,radius:a,color:n,iconColor:d,variant:u,autoContrast:i})=>{const r=Z({color:n||o.primaryColor,theme:o}),c=r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-outline)`:r.color;return{root:{"--radio-size":T(s,"radio-size"),"--radio-radius":a===void 0?void 0:W(a),"--radio-color":u==="outline"?c:N(n,o),"--radio-icon-color":d?N(d,o):oe(i,o)?ee({color:n,theme:o,autoContrast:i}):void 0,"--radio-icon-size":T(s,"radio-icon-size")}}}),G=A((o,s)=>{const a=P("Radio",Be,o),{classNames:n,className:d,style:u,styles:i,unstyled:r,vars:c,id:y,size:j,label:_,labelPosition:p,description:b,error:l,radius:t,color:v,variant:m,disabled:w,wrapperProps:f,icon:k=le,rootRef:I,iconColor:C,onChange:h,mod:x,...$}=a,R=D({name:"Radio",classes:de,props:a,className:d,style:u,classNames:n,styles:i,unstyled:r,vars:c,varsResolver:De}),g=ne(),E=(g==null?void 0:g.size)??j,ue=a.size?j:E,{styleProps:pe,rest:V}=he($),L=se(y),K=g?{checked:g.value===V.value,name:V.name??g.name,onChange:H=>{g.onChange(H),h==null||h(H)}}:{};return e.jsx(te,{...R("root"),__staticSelector:"Radio",__stylesApiProps:a,id:L,size:ue,labelPosition:p,label:_,description:b,error:l,disabled:w,classNames:n,styles:i,unstyled:r,"data-checked":K.checked||void 0,variant:m,ref:I,mod:x,...pe,...f,children:e.jsxs(S,{...R("inner"),mod:{"label-position":p},children:[e.jsx(S,{...R("radio",{focusable:!0,variant:m}),onChange:h,...V,...K,component:"input",mod:{error:!!l},ref:s,id:L,disabled:w,type:"radio"}),e.jsx(k,{...R("icon"),"aria-hidden":!0})]})})});G.classes=de;G.displayName="@mantine/core/Radio";G.Group=Y;G.Card=M;G.Indicator=q;const Ee={},B=A((o,s)=>{const a=P("TextInput",Ee,o);return e.jsx(re,{component:"input",ref:s,...a,__staticSelector:"TextInput"})});B.classes=re.classes;B.displayName="@mantine/core/TextInput";function Ue(){var b;const{saveGoals:o,goals:s}=ge(),a=ye(),{register:n,control:d,getValues:u,setValue:i,handleSubmit:r,watch:c}=je({defaultValues:{goals:s}}),{fields:y,append:j,remove:_,update:p}=_e({control:d,name:"goals"});return X.useEffect(()=>{s!=null&&s.length&&i("goals",s)},[s,i]),e.jsxs(S,{component:"form",onSubmit:r(l=>{o(l.goals),be.show({title:"Goals Saved",message:"Your goals have been updated.",color:"green"}),a("/tracker")}),children:[e.jsx(ve,{mb:"sm",c:"red",fz:"sm",children:"For goals created more than a day ago, you can only change the description."}),y.map((l,t)=>{const v=l.createdOn?Q().diff(l.createdOn,"day")>0:!1;return e.jsxs(S,{style:m=>({padding:m.spacing.sm,marginBottom:m.spacing.md,borderRadius:m.radius.sm,backgroundColor:m.colors.dark[6]}),children:[e.jsx(B,{withAsterisk:!0,placeholder:"Goal Title",mb:"sm",label:"Goal Title",...n(`goals.${t}.title`),disabled:v,description:v?`Created on ${Q(l.createdOn).format("DD MMM, YY")}`:void 0}),e.jsx(Ce,{...n(`goals.${t}.description`),label:"Description",placeholder:"Description",rows:6}),e.jsx(G.Group,{name:`goals.${t}.type`,value:c(`goals.${t}.type`),onChange:m=>{p(t,{...u(`goals.${t}`),type:m})},label:"Goal Type",defaultValue:"single",withAsterisk:!0,children:e.jsxs(O,{mt:"xs",children:[e.jsx(G,{value:"single",label:"Single Event",disabled:v}),e.jsx(G,{value:"calendar",label:"Calendar Tracker",disabled:v})]})}),c(`goals.${t}.type`)==="calendar"&&e.jsx(B,{type:"number",withAsterisk:!0,mt:"sm",label:"Target",placeholder:"target",description:"Specify how many times you want to complete this goal in the year.",...n(`goals.${t}.target`)}),!v&&e.jsx(O,{mt:"sm",justify:"flex-end",children:e.jsx(F,{color:"red",onClick:()=>_(t),children:"Remove Goal"})})]},l.id)}),e.jsxs(O,{justify:"space-between",children:[e.jsx(F,{onClick:()=>j({title:"",type:"single",target:0,description:""}),children:"Add Goal"}),((b=c("goals"))==null?void 0:b.length)>0&&e.jsx(F,{type:"submit",children:"Save"})]})]})}export{Ue as default};
